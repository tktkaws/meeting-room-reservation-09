# 会議室予約システム

## 概要
会議室予約情報を管理するシステム
会議室は1室のみ
ユーザーは予約を作成する
予約情報のCRUDとともにユーザーにメールが送信される機能があるがユーザーはメールを受信するか選択できる
部署毎にデフォルトカラーが設定されていてるが、ユーザーはユーザー個別のカラーを設定することができる
部署は管理者のみがCRUD可能

## 技術
php
sqlite
js
html
css

## ファイル構成
```
├─api // DBを操作するphpファイル
├─database // DB,スキーマファイル
├─src
│  ├─css
│  ├─images
│  └─js
├─config.html // ユーザー情報の更新
├─department.html // 部署のCRUD 管理者のみ
└─index.html // 予約のCRUD　非ログイン状態でも予約の閲覧は可能
```

## JS
クラスは使用しない
モジュールで分割
各ページで固有のファイルを読み込む
config.htmlはconfig.jsを読み込む
ログイン状態の管理など共通の処理は各ファイルにimportして使用する


## テーブル
```
-- Users table
CREATE TABLE users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    email TEXT UNIQUE NOT NULL,
    password TEXT NOT NULL,
    admin BOOLEAN DEFAULT FALSE,
    department_id INTEGER NOT NULL,
    email_notification BOOLEAN DEFAULT FALSE,
    color_settings TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (department_id) REFERENCES departments(id)
);

-- Departments table
CREATE TABLE departments (
    id INTEGER PRIMARY KEY,
    name TEXT NOT NULL UNIQUE,
    default_color TEXT DEFAULT '#718096',
    display_order INTEGER DEFAULT 0,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- Reservations table
CREATE TABLE reservations (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    title TEXT NOT NULL,
    description TEXT,
    date DATE NOT NULL,
    start_datetime DATETIME NOT NULL,
    end_datetime DATETIME NOT NULL,
    is_company_wide BOOLEAN DEFAULT FALSE,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
);
```

## ユーザー
一般ユーザーと管理者ユーザー
予約を作成
メールの受信有無を設定

## 部署
管理者ユーザーのみCRUD操作可能

## 予約
同じ部署のユーザーが作成した予約は操作可能
管理者ユーザーは全ての予約を操作可能

### バリデーション
土日は不可
日本時間で9時から18時まで
同じ時刻の予約不可
15分単位での予約
タイトル50文字
詳細300文字

### メール
予約のCRUDが発生したときに受診希望者にメールを送信する
phpで送信
イントラネットのみなのでセキュリティ要件は最小でよい

## 予約表示方法
月間ビュー
週間ビュー
リストビュー（本日以降の予定全て）
の3種類を切り替える

非ログイン状態でも予約の閲覧を可能にする
新規作成更新削除ボタンはログインユーザーのみ表示
予約情報をクリックすると詳細情報をモーダルで表示する
編集可能な予約には更新削除ボタンを表示

### 月間ビュー
タグに設定されたカラーもしくはユーザーがタグに設定したカラーで識別
同じ部署のユーザーが作成した予約を識別できるボタンを作成
今日ボタンで今日にジャンプ
日付セルをクリックしたらその日付で予約を作成できるモーダルを開く

### 週間ビュー
タグに設定されたカラーもしくはユーザーがタグに設定したカラーで識別
同じ部署のユーザーが作成した予約を識別できるボタンを作成
今日ボタンで今日にジャンプ
9時から18時までの15分毎のセルを縦に並べて

### リストビュー
今日以降の予約を表示　今日の予定が一番上

日付時間タイトル予約者の部署予約者の名前をリストに表示

過去の予約を表示（リストビューの中で切替　予約の取得期間をフォームで確定）

## サイドバー
ログインフォーム
ログアウトボタン
ユーザー情報
カラー設定フォーム（各部署のデフォルトカラーを上書きするユーザー固有のカラー設定）

## DB操作
DBの初期化
C:\Program Files\Ampps\www\meeting-room-reservation-09\database\meeting-room-reservation.sql
csvでデータを取り込む